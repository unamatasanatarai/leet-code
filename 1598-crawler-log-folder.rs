use std::process::exit;
struct Solution;
impl Solution {
    pub fn min_operations(logs: Vec<String>) -> i32 {
        let mut cnt = 0;
        for log in &logs {
            let l = log.as_bytes();
            if l == b"../" {
                if cnt > 0 {
                    cnt -= 1;
                }
            } else if l != b"./" {
                cnt += 1;
            }
        }
        cnt
    }
}

fn main() {
    let tests: Vec<(Vec<&str>, i32)> = vec![
        (vec![], 0),
        (vec!["./"], 0),
        (vec!["../"], 0),
        (vec!["a/"], 1),
        (vec!["a/", "b/"], 2),
        (vec!["a/", "../"], 0),
        (vec!["a/", "./"], 1),
        (vec!["a/", "b/", "../"], 1),
        (vec!["./", "./"], 0),
        (vec!["../", "../"], 0),
        (vec!["a/", "b/", "c/"], 3),
        (vec!["a/", "b/", "c/", "../"], 2),
        (vec!["a/", "b/", "c/", "../", "../"], 1),
        (vec!["a/", "b/", "c/", "../", "../", "../"], 0),
        (vec!["a/", "../", "../"], 0),
        (vec!["a/", "b/", "../", "../"], 0),
        (vec!["a/", "b/", "../", "c/"], 2),
        (vec!["a/", "b/", "c/", "../", "../"], 1),
        (vec!["./", "a/", "./", "b/"], 2),
        (vec!["a/", "b/", "./", "c/"], 3),
        (vec!["a/", "./", "./"], 1),
        (vec!["a/", "b/", "c/", "./"], 3),
        (vec!["a/", "../", "b/"], 1),
        (vec!["a/", "../", "b/", "../"], 0),
        (vec!["a/", "b/", "c/", "d/"], 4),
        (vec!["a/", "b/", "c/", "d/", "../"], 3),
        (vec!["../", "a/"], 1),
        (vec!["../", "a/", "../"], 0),
        (vec!["a/", "../", "../", "../"], 0),
        (vec!["a/", "b/", "../", "../", "../"], 0),
        (vec!["a/", "b/", "c/", "../", "../", "d/"], 2),
        (vec!["a/", "b/", "c/", "../", "d/", "../"], 2),
        (vec!["a/", "b/", "c/", "../", "d/"], 3),
        (vec!["./", "../", "a/"], 1),
        (vec!["./", "../", "./"], 0),
        (vec!["a/", "./", "../"], 0),
        (vec!["a/", "b/", "./", "../"], 1),
        (vec!["a/", "b/", "c/", "./", "../"], 2),
        (vec!["x/"], 1),
        (vec!["x/", "y/"], 2),
        (vec!["x/", "y/", "../"], 1),
        (vec!["x/", "y/", "z/"], 3),
        (vec!["x/", "y/", "z/", "../", "../"], 1),
        (vec!["x/", "../", "y/"], 1),
        (vec!["x/", "../", "y/", "../"], 0),
        (vec!["x/", "y/", "../", "z/"], 2),
        (vec!["x/", "y/", "z/", "../", "a/"], 3),
        (vec!["x/", "y/", "z/", "../", "../", "a/"], 2),
        (vec!["a/", "b/", "c/", "d/", "e/"], 5),
        (vec!["a/", "b/", "c/", "d/", "e/", "../"], 4),
        (vec!["a/", "b/", "c/", "d/", "e/", "../", "../"], 3),
        (vec!["a/", "b/", "c/", "d/", "e/", "../", "../", "../"], 2),
        (
            vec!["a/", "b/", "c/", "d/", "e/", "../", "../", "../", "../"],
            1,
        ),
        (
            vec![
                "a/", "b/", "c/", "d/", "e/", "../", "../", "../", "../", "../",
            ],
            0,
        ),
        (vec!["./", "./", "./", "./"], 0),
        (vec!["a/", "./", "b/", "./", "c/"], 3),
        (vec!["a/", "./", "b/", "./", "c/", "../"], 2),
        (vec!["a/", "./", "b/", "./", "c/", "../", "../"], 1),
        (vec!["a/", "b/", "../", "c/", "../"], 1),
        (vec!["a/", "b/", "c/", "../", "d/", "../", "e/"], 3),
        (vec!["a/", "../", "b/", "c/", "../"], 1),
        (vec!["a/", "b/", "c/", "../", "../", "d/", "e/"], 3),
        (vec!["../", "../", "../"], 0),
        (vec!["../", "../", "a/"], 1),
        (vec!["../", "a/", "b/"], 2),
        (vec!["../", "a/", "b/", "../"], 1),
        (vec!["../", "a/", "b/", "../", "../"], 0),
        (vec!["a/", "b/", "c/", "../", "../", "../", "../"], 0),
    ];

    for (i, (input, expected)) in tests.iter().enumerate() {
        let logs: Vec<String> = input.iter().map(|s| s.to_string()).collect();
        let received = Solution::min_operations(logs.clone());

        if received != *expected {
            eprintln!("Test {} FAILED", i);
            eprintln!("input    : {:?}", input);
            eprintln!("expected : {}", expected);
            eprintln!("received : {}", received);
            exit(1);
        }
    }

    println!("All {} tests passed âœ…", tests.len());
}
